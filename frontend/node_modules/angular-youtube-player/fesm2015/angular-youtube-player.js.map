{"version":3,"file":"angular-youtube-player.js","sources":["ng://angular-youtube-player/lib/ytplayer.config.ts","ng://angular-youtube-player/lib/util.ts","ng://angular-youtube-player/lib/ytplayer.service.ts","ng://angular-youtube-player/lib/ytplayer.component.ts","ng://angular-youtube-player/lib/ytplayer.module.ts"],"sourcesContent":["export class YTPlayerConfig {\n  static defaultConfig = { shouldLoadAPI: true, multiplePlaying: false };\n\n  constructor(\n    public shouldLoadAPI = YTPlayerConfig.defaultConfig.shouldLoadAPI,\n    public multiplePlaying = YTPlayerConfig.defaultConfig.multiplePlaying\n  ) {}\n}\n","export function parseQueryString(string: string): any {\n  if (/(?:[\\w_]+=(?:[\\w\\d]+|\\d)&?)+/.test(string)) {\n    const parsed = {};\n    string.split('&').forEach(query => {\n      const pair = query.split('=');\n      parsed[pair[0]] = pair[1];\n    });\n    return parsed;\n  } else {\n    throw new Error('Bad string format, please refer to https://developers.google.com/youtube/player_parameters');\n  }\n}\n\nexport function loadAPI() {\n  return new Promise(resolve => {\n    window['onYouTubeIframeAPIReady'] = resolve;\n    const tag = window.document.createElement('script');\n    tag.src = 'https://www.youtube.com/iframe_api';\n    const firstScriptTag = window.document.getElementsByTagName('script')[0];\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n  });\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { YTPlayerComponent } from './ytplayer.component';\nimport { YTPlayerConfig } from './ytplayer.config';\nimport { loadAPI } from './util';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class YTPlayerService {\n  public get playersCount(): number {\n    return this.players.length;\n  }\n\n  public apiReady = new BehaviorSubject<boolean>(window['YT'] !== undefined);\n\n  private players = new Array<YTPlayerComponent>();\n  private multiplePlaying: boolean;\n\n  constructor(private config: YTPlayerConfig) {\n    this.multiplePlaying = config.multiplePlaying;\n\n    if (config.shouldLoadAPI !== false) {\n      loadAPI().then(() => this.apiReady.next(true));\n    } else if (this.apiReady.value === false) {\n      console.warn('YT API not loaded');\n    }\n  }\n\n  public addPlayer(player: YTPlayerComponent) {\n    this.players.push(player);\n  }\n\n  public removePlayer(player: YTPlayerComponent) {\n    const index = this.players.indexOf(player);\n    this.players.splice(index, 1);\n  }\n\n  public pauseAllExcept(playerComponent: YTPlayerComponent) {\n    if (this.multiplePlaying) {\n      return;\n    }\n\n    const exception = this.players.indexOf(playerComponent);\n    if (exception > -1) {\n      this.players.forEach((player, index) => {\n        if (exception !== index) {\n          player.pause();\n        }\n      });\n    }\n  }\n}\n","/// <reference types=\"youtube\"/>\n\nimport { Component, OnInit, AfterViewInit, OnDestroy, Input, Output, EventEmitter } from '@angular/core';\n\nimport { YTPlayerService } from './ytplayer.service';\nimport { parseQueryString } from './util';\n\n@Component({\n  selector: 'lib-ytplayer',\n  template: '<div [id]=\"domId\"></div>',\n  styles: [':host, :host ::ng-deep iframe { display: block; width: 100%; height: 100%; }']\n})\nexport class YTPlayerComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() videoId: string;\n  @Input() domId: string;\n  @Input() parameters: string | YT.PlayerVars;\n\n  @Output() ready = new EventEmitter();\n  @Output() unstarted = new EventEmitter();\n  @Output() ended = new EventEmitter();\n  @Output() playing = new EventEmitter();\n  @Output() paused = new EventEmitter();\n  @Output() buffering = new EventEmitter();\n  @Output() cued = new EventEmitter();\n\n  public get currentTime(): number {\n    return this.player.getCurrentTime();\n  }\n\n  private player: YT.Player;\n  private isReady: boolean;\n\n  constructor(private ytPlayerService: YTPlayerService) {}\n\n  ngOnInit() {\n    this.ytPlayerService.addPlayer(this);\n    this.domId = this.domId || this.videoId || 'ng-yt-player-' + this.ytPlayerService.playersCount;\n  }\n\n  ngAfterViewInit() {\n    this.ytPlayerService.apiReady.subscribe(ready => {\n      if (ready && !this.player) {\n        const parameters: YT.PlayerVars = typeof this.parameters === 'string' ? parseQueryString(this.parameters) : this.parameters;\n        this.player = this.initPlayer(this.videoId, parameters, this.domId);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.ytPlayerService.removePlayer(this);\n  }\n\n  public play() {\n    if (this.isReady) {\n      this.player.playVideo();\n    } else {\n      console.warn('The player was not ready when tried to play.');\n    }\n  }\n\n  public pause() {\n    if (this.isReady) {\n      this.player.pauseVideo();\n    } else {\n      console.warn('The player was not ready when tried to pause.');\n    }\n  }\n\n  public cueVideoById(videoId: string, startSeconds?: number) {\n    if (this.isReady) {\n      this.player.cueVideoById(videoId, startSeconds);\n    } else {\n      console.warn('The player was not ready when tried to cueVideoById.');\n    }\n  }\n\n  public loadVideoById(videoId: string, startSeconds?: number) {\n    if (this.isReady) {\n      this.player.loadVideoById(videoId, startSeconds);\n    } else {\n      console.warn('The player was not ready when tried to loadVideoById.');\n    }\n  }\n\n  private onplay() {\n    this.playing.emit();\n    this.ytPlayerService.pauseAllExcept(this);\n  }\n\n  private initPlayer(videoId: string, playerVars: YT.PlayerVars, domId: string) {\n    const onReady = () => {\n      if (!this.isReady) {\n        this.ready.emit();\n        this.isReady = true;\n      }\n    };\n    const onStateChange = ({ data }) => {\n      switch (data) {\n        case YT.PlayerState.UNSTARTED:\n          this.unstarted.emit();\n          break;\n        case YT.PlayerState.ENDED:\n          this.ended.emit();\n          break;\n        case YT.PlayerState.PLAYING:\n          this.onplay();\n          break;\n        case YT.PlayerState.PAUSED:\n          this.paused.emit();\n          break;\n        case YT.PlayerState.BUFFERING:\n          this.buffering.emit();\n          break;\n        case YT.PlayerState.CUED:\n          this.cued.emit();\n          break;\n      }\n    };\n\n    return new YT.Player(domId, {\n      videoId,\n      playerVars,\n      events: { onReady, onStateChange }\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { YTPlayerComponent } from './ytplayer.component';\nimport { YTPlayerConfig } from './ytplayer.config';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [YTPlayerComponent],\n  providers: [{ provide: YTPlayerConfig, useValue: YTPlayerConfig.defaultConfig }],\n  exports: [YTPlayerComponent]\n})\nexport class YTPlayerModule { }\n"],"names":[],"mappings":"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"}