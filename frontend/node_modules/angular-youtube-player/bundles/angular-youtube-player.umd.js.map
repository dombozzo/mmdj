{"version":3,"file":"angular-youtube-player.umd.js","sources":["ng://angular-youtube-player/lib/ytplayer.config.ts","ng://angular-youtube-player/lib/util.ts","ng://angular-youtube-player/lib/ytplayer.service.ts","ng://angular-youtube-player/lib/ytplayer.component.ts","ng://angular-youtube-player/lib/ytplayer.module.ts"],"sourcesContent":["export class YTPlayerConfig {\n  static defaultConfig = { shouldLoadAPI: true, multiplePlaying: false };\n\n  constructor(\n    public shouldLoadAPI = YTPlayerConfig.defaultConfig.shouldLoadAPI,\n    public multiplePlaying = YTPlayerConfig.defaultConfig.multiplePlaying\n  ) {}\n}\n","export function parseQueryString(string: string): any {\n  if (/(?:[\\w_]+=(?:[\\w\\d]+|\\d)&?)+/.test(string)) {\n    const parsed = {};\n    string.split('&').forEach(query => {\n      const pair = query.split('=');\n      parsed[pair[0]] = pair[1];\n    });\n    return parsed;\n  } else {\n    throw new Error('Bad string format, please refer to https://developers.google.com/youtube/player_parameters');\n  }\n}\n\nexport function loadAPI() {\n  return new Promise(resolve => {\n    window['onYouTubeIframeAPIReady'] = resolve;\n    const tag = window.document.createElement('script');\n    tag.src = 'https://www.youtube.com/iframe_api';\n    const firstScriptTag = window.document.getElementsByTagName('script')[0];\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n  });\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { YTPlayerComponent } from './ytplayer.component';\nimport { YTPlayerConfig } from './ytplayer.config';\nimport { loadAPI } from './util';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class YTPlayerService {\n  public get playersCount(): number {\n    return this.players.length;\n  }\n\n  public apiReady = new BehaviorSubject<boolean>(window['YT'] !== undefined);\n\n  private players = new Array<YTPlayerComponent>();\n  private multiplePlaying: boolean;\n\n  constructor(private config: YTPlayerConfig) {\n    this.multiplePlaying = config.multiplePlaying;\n\n    if (config.shouldLoadAPI !== false) {\n      loadAPI().then(() => this.apiReady.next(true));\n    } else if (this.apiReady.value === false) {\n      console.warn('YT API not loaded');\n    }\n  }\n\n  public addPlayer(player: YTPlayerComponent) {\n    this.players.push(player);\n  }\n\n  public removePlayer(player: YTPlayerComponent) {\n    const index = this.players.indexOf(player);\n    this.players.splice(index, 1);\n  }\n\n  public pauseAllExcept(playerComponent: YTPlayerComponent) {\n    if (this.multiplePlaying) {\n      return;\n    }\n\n    const exception = this.players.indexOf(playerComponent);\n    if (exception > -1) {\n      this.players.forEach((player, index) => {\n        if (exception !== index) {\n          player.pause();\n        }\n      });\n    }\n  }\n}\n","/// <reference types=\"youtube\"/>\n\nimport { Component, OnInit, AfterViewInit, OnDestroy, Input, Output, EventEmitter } from '@angular/core';\n\nimport { YTPlayerService } from './ytplayer.service';\nimport { parseQueryString } from './util';\n\n@Component({\n  selector: 'lib-ytplayer',\n  template: '<div [id]=\"domId\"></div>',\n  styles: [':host, :host ::ng-deep iframe { display: block; width: 100%; height: 100%; }']\n})\nexport class YTPlayerComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() videoId: string;\n  @Input() domId: string;\n  @Input() parameters: string | YT.PlayerVars;\n\n  @Output() ready = new EventEmitter();\n  @Output() unstarted = new EventEmitter();\n  @Output() ended = new EventEmitter();\n  @Output() playing = new EventEmitter();\n  @Output() paused = new EventEmitter();\n  @Output() buffering = new EventEmitter();\n  @Output() cued = new EventEmitter();\n\n  public get currentTime(): number {\n    return this.player.getCurrentTime();\n  }\n\n  private player: YT.Player;\n  private isReady: boolean;\n\n  constructor(private ytPlayerService: YTPlayerService) {}\n\n  ngOnInit() {\n    this.ytPlayerService.addPlayer(this);\n    this.domId = this.domId || this.videoId || 'ng-yt-player-' + this.ytPlayerService.playersCount;\n  }\n\n  ngAfterViewInit() {\n    this.ytPlayerService.apiReady.subscribe(ready => {\n      if (ready && !this.player) {\n        const parameters: YT.PlayerVars = typeof this.parameters === 'string' ? parseQueryString(this.parameters) : this.parameters;\n        this.player = this.initPlayer(this.videoId, parameters, this.domId);\n      }\n    });\n  }\n\n  ngOnDestroy() {\n    this.ytPlayerService.removePlayer(this);\n  }\n\n  public play() {\n    if (this.isReady) {\n      this.player.playVideo();\n    } else {\n      console.warn('The player was not ready when tried to play.');\n    }\n  }\n\n  public pause() {\n    if (this.isReady) {\n      this.player.pauseVideo();\n    } else {\n      console.warn('The player was not ready when tried to pause.');\n    }\n  }\n\n  public cueVideoById(videoId: string, startSeconds?: number) {\n    if (this.isReady) {\n      this.player.cueVideoById(videoId, startSeconds);\n    } else {\n      console.warn('The player was not ready when tried to cueVideoById.');\n    }\n  }\n\n  public loadVideoById(videoId: string, startSeconds?: number) {\n    if (this.isReady) {\n      this.player.loadVideoById(videoId, startSeconds);\n    } else {\n      console.warn('The player was not ready when tried to loadVideoById.');\n    }\n  }\n\n  private onplay() {\n    this.playing.emit();\n    this.ytPlayerService.pauseAllExcept(this);\n  }\n\n  private initPlayer(videoId: string, playerVars: YT.PlayerVars, domId: string) {\n    const onReady = () => {\n      if (!this.isReady) {\n        this.ready.emit();\n        this.isReady = true;\n      }\n    };\n    const onStateChange = ({ data }) => {\n      switch (data) {\n        case YT.PlayerState.UNSTARTED:\n          this.unstarted.emit();\n          break;\n        case YT.PlayerState.ENDED:\n          this.ended.emit();\n          break;\n        case YT.PlayerState.PLAYING:\n          this.onplay();\n          break;\n        case YT.PlayerState.PAUSED:\n          this.paused.emit();\n          break;\n        case YT.PlayerState.BUFFERING:\n          this.buffering.emit();\n          break;\n        case YT.PlayerState.CUED:\n          this.cued.emit();\n          break;\n      }\n    };\n\n    return new YT.Player(domId, {\n      videoId,\n      playerVars,\n      events: { onReady, onStateChange }\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { YTPlayerComponent } from './ytplayer.component';\nimport { YTPlayerConfig } from './ytplayer.config';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [YTPlayerComponent],\n  providers: [{ provide: YTPlayerConfig, useValue: YTPlayerConfig.defaultConfig }],\n  exports: [YTPlayerComponent]\n})\nexport class YTPlayerModule { }\n"],"names":["BehaviorSubject","Injectable","EventEmitter","Component","Input","Output","NgModule"],"mappings":"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"}