!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("angular-youtube-player",["exports","@angular/core","rxjs"],t):t((e=e||self)["angular-youtube-player"]={},e.ng.core,e.rxjs)}(this,function(e,t,r){"use strict";var n=function(){function e(t,r){void 0===t&&(t=e.defaultConfig.shouldLoadAPI),void 0===r&&(r=e.defaultConfig.multiplePlaying),this.shouldLoadAPI=t,this.multiplePlaying=r}return e.defaultConfig={shouldLoadAPI:!0,multiplePlaying:!1},e}();function i(){return new Promise(function(e){window.onYouTubeIframeAPIReady=e;var t=window.document.createElement("script");t.src="https://www.youtube.com/iframe_api";var r=window.document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)})}var o=function(){function e(e){var t=this;this.config=e,this.apiReady=new r.BehaviorSubject(void 0!==window.YT),this.players=new Array,this.multiplePlaying=e.multiplePlaying,!1!==e.shouldLoadAPI?i().then(function(){return t.apiReady.next(!0)}):!1===this.apiReady.value&&console.warn("YT API not loaded")}return Object.defineProperty(e.prototype,"playersCount",{get:function(){return this.players.length},enumerable:!0,configurable:!0}),e.prototype.addPlayer=function(e){this.players.push(e)},e.prototype.removePlayer=function(e){var t=this.players.indexOf(e);this.players.splice(t,1)},e.prototype.pauseAllExcept=function(e){if(!this.multiplePlaying){var t=this.players.indexOf(e);t>-1&&this.players.forEach(function(e,r){t!==r&&e.pause()})}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n))},token:e,providedIn:"root"}),e}();var a=function(){function e(e){this.ytPlayerService=e,this.ready=new t.EventEmitter,this.unstarted=new t.EventEmitter,this.ended=new t.EventEmitter,this.playing=new t.EventEmitter,this.paused=new t.EventEmitter,this.buffering=new t.EventEmitter,this.cued=new t.EventEmitter}return Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.player.getCurrentTime()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.ytPlayerService.addPlayer(this),this.domId=this.domId||this.videoId||"ng-yt-player-"+this.ytPlayerService.playersCount},e.prototype.ngAfterViewInit=function(){var e=this;this.ytPlayerService.apiReady.subscribe(function(t){if(t&&!e.player){var r="string"==typeof e.parameters?function(e){if(/(?:[\w_]+=(?:[\w\d]+|\d)&?)+/.test(e)){var t={};return e.split("&").forEach(function(e){var r=e.split("=");t[r[0]]=r[1]}),t}throw new Error("Bad string format, please refer to https://developers.google.com/youtube/player_parameters")}(e.parameters):e.parameters;e.player=e.initPlayer(e.videoId,r,e.domId)}})},e.prototype.ngOnDestroy=function(){this.ytPlayerService.removePlayer(this)},e.prototype.play=function(){this.isReady?this.player.playVideo():console.warn("The player was not ready when tried to play.")},e.prototype.pause=function(){this.isReady?this.player.pauseVideo():console.warn("The player was not ready when tried to pause.")},e.prototype.cueVideoById=function(e,t){this.isReady?this.player.cueVideoById(e,t):console.warn("The player was not ready when tried to cueVideoById.")},e.prototype.loadVideoById=function(e,t){this.isReady?this.player.loadVideoById(e,t):console.warn("The player was not ready when tried to loadVideoById.")},e.prototype.onplay=function(){this.playing.emit(),this.ytPlayerService.pauseAllExcept(this)},e.prototype.initPlayer=function(e,t,r){var n=this;return new YT.Player(r,{videoId:e,playerVars:t,events:{onReady:function(){n.isReady||(n.ready.emit(),n.isReady=!0)},onStateChange:function(e){switch(e.data){case-1:n.unstarted.emit();break;case 0:n.ended.emit();break;case 1:n.onplay();break;case 2:n.paused.emit();break;case 3:n.buffering.emit();break;case 5:n.cued.emit()}}}})},e.decorators=[{type:t.Component,args:[{selector:"lib-ytplayer",template:'<div [id]="domId"></div>',styles:[":host, :host ::ng-deep iframe { display: block; width: 100%; height: 100%; }"]}]}],e.ctorParameters=function(){return[{type:o}]},e.propDecorators={videoId:[{type:t.Input}],domId:[{type:t.Input}],parameters:[{type:t.Input}],ready:[{type:t.Output}],unstarted:[{type:t.Output}],ended:[{type:t.Output}],playing:[{type:t.Output}],paused:[{type:t.Output}],buffering:[{type:t.Output}],cued:[{type:t.Output}]},e}();var s=n.defaultConfig,p=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[],declarations:[a],providers:[{provide:n,useValue:s}],exports:[a]}]}],e}();e.YTPlayerComponent=a,e.YTPlayerConfig=n,e.YTPlayerModule=p,e.YTPlayerService=o,e.loadAPI=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-youtube-player.umd.min.js.map